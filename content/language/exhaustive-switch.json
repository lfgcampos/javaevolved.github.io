{
  "id": 18,
  "slug": "exhaustive-switch",
  "title": "Exhaustive switch without default",
  "category": "language",
  "difficulty": "intermediate",
  "jdkVersion": "21",
  "oldLabel": "Java 8",
  "modernLabel": "Java 21+",
  "oldApproach": "Mandatory default",
  "modernApproach": "Sealed Exhaustiveness",
  "oldCode": "// Must add default even though\n// all cases are covered\ndouble area(Shape s) {\n    if (s instanceof Circle c)\n        return Math.PI * c.r() * c.r();\n    else if (s instanceof Rect r)\n        return r.w() * r.h();\n    else throw new IAE();\n}",
  "modernCode": "// sealed Shape permits Circle, Rect\ndouble area(Shape s) {\n    return switch (s) {\n        case Circle c ->\n            Math.PI * c.r() * c.r();\n        case Rect r ->\n            r.w() * r.h();\n    }; // no default needed!\n}",
  "summary": "Compiler verifies all sealed subtypes are covered â€” no default needed.",
  "explanation": "When switching over a sealed type, the compiler knows all possible subtypes and verifies every case is handled. If you add a new subtype, the compiler flags every switch that's now incomplete.",
  "whyModernWins": [
    {
      "icon": "âœ…",
      "title": "Compile-time safety",
      "desc": "Add a new subtype and the compiler shows every place to update."
    },
    {
      "icon": "ğŸš«",
      "title": "No dead code",
      "desc": "No unreachable default branch that masks bugs."
    },
    {
      "icon": "ğŸ“",
      "title": "Algebraic types",
      "desc": "Sealed + records + exhaustive switch = proper ADTs in Java."
    }
  ],
  "support": "Widely available since JDK 21 LTS (Sept 2023)",
  "prev": "language/module-import-declarations",
  "next": "collections/immutable-list-creation",
  "related": [
    "language/sealed-classes",
    "language/pattern-matching-instanceof",
    "language/enhanced-for-with-var"
  ]
}
