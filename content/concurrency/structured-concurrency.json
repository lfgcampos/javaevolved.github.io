{
  "id": 47,
  "slug": "structured-concurrency",
  "title": "Structured concurrency",
  "category": "concurrency",
  "difficulty": "advanced",
  "jdkVersion": "25",
  "oldLabel": "Java 8",
  "modernLabel": "Java 25 (Preview)",
  "oldApproach": "Manual Thread Lifecycle",
  "modernApproach": "StructuredTaskScope",
  "oldCode": "ExecutorService exec =\n    Executors.newFixedThreadPool(2);\nFuture<User> u = exec.submit(this::fetchUser);\nFuture<Order> o = exec.submit(this::fetchOrder);\ntry {\n    return combine(u.get(), o.get());\n} finally { exec.shutdown(); }",
  "modernCode": "try (var scope = new StructuredTaskScope\n        .ShutdownOnFailure()) {\n    var u = scope.fork(this::fetchUser);\n    var o = scope.fork(this::fetchOrder);\n    scope.join().throwIfFailed();\n    return combine(u.get(), o.get());\n}",
  "summary": "Manage concurrent task lifetimes as a single unit of work.",
  "explanation": "Structured concurrency treats a group of concurrent tasks as one operation. If any subtask fails, the others are cancelled. The scope ensures no thread leaks and gives clear parent-child relationships.",
  "whyModernWins": [
    {
      "icon": "üõ°Ô∏è",
      "title": "No thread leaks",
      "desc": "All forked tasks complete before the scope closes."
    },
    {
      "icon": "‚ö°",
      "title": "Fast failure",
      "desc": "ShutdownOnFailure cancels siblings if one fails."
    },
    {
      "icon": "üìê",
      "title": "Clear structure",
      "desc": "Task lifetime matches the lexical scope in code."
    }
  ],
  "support": "Preview in JDK 25 (fifth preview, JEP 505). Requires --enable-preview.",
  "prev": "concurrency/virtual-threads",
  "next": "concurrency/scoped-values",
  "related": [
    "concurrency/virtual-threads",
    "concurrency/scoped-values",
    "concurrency/stable-values"
  ]
}
