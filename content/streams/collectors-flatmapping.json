{
  "id": 39,
  "slug": "collectors-flatmapping",
  "title": "Collectors.flatMapping()",
  "category": "streams",
  "difficulty": "intermediate",
  "jdkVersion": "9",
  "oldLabel": "Java 8",
  "modernLabel": "Java 9+",
  "oldApproach": "Nested flatMap",
  "modernApproach": "flatMapping()",
  "oldCode": "// Flatten within a grouping collector\n// Required complex custom collector\nMap<String, Set<String>> tagsByDept =\n    // no clean way in Java 8",
  "modernCode": "var tagsByDept = employees.stream()\n    .collect(groupingBy(\n        Emp::dept,\n        flatMapping(\n            e -> e.tags().stream(),\n            toSet()\n        )\n    ));",
  "summary": "Use flatMapping() to flatten inside a grouping collector.",
  "explanation": "Collectors.flatMapping() applies a one-to-many mapping as a downstream collector. It's the collector equivalent of Stream.flatMap() ‚Äî useful inside groupingBy or partitioningBy.",
  "whyModernWins": [
    {
      "icon": "üß©",
      "title": "Composable",
      "desc": "Works as a downstream collector inside groupingBy."
    },
    {
      "icon": "üìê",
      "title": "One pass",
      "desc": "Flatten and group in a single stream traversal."
    },
    {
      "icon": "üîó",
      "title": "Nestable",
      "desc": "Combine with other downstream collectors."
    }
  ],
  "support": "Widely available since JDK 9 (Sept 2017)",
  "prev": "streams/stream-takewhile-dropwhile",
  "next": "streams/stream-tolist",
  "related": [
    "streams/optional-ifpresentorelse",
    "streams/stream-of-nullable",
    "streams/stream-iterate-predicate"
  ]
}
