{
  "id": 41,
  "slug": "stream-mapmulti",
  "title": "Stream.mapMulti()",
  "category": "streams",
  "difficulty": "intermediate",
  "jdkVersion": "16",
  "oldLabel": "Java 8",
  "modernLabel": "Java 16+",
  "oldApproach": "flatMap + List",
  "modernApproach": "mapMulti()",
  "oldCode": "stream.flatMap(order ->\n    order.items().stream()\n        .map(item -> new OrderItem(\n            order.id(), item)\n        )\n);",
  "modernCode": "stream.<OrderItem>mapMulti(\n    (order, downstream) -> {\n        for (var item : order.items())\n            downstream.accept(\n                new OrderItem(order.id(), item));\n    }\n);",
  "summary": "Emit zero or more elements per input without creating intermediate streams.",
  "explanation": "mapMulti() is an imperative alternative to flatMap that avoids creating intermediate Stream objects for each element. It's more efficient when the mapping produces a small number of elements.",
  "whyModernWins": [
    {
      "icon": "âš¡",
      "title": "Less allocation",
      "desc": "No intermediate Stream created per element."
    },
    {
      "icon": "ğŸ¯",
      "title": "Imperative style",
      "desc": "Use loops and conditionals directly."
    },
    {
      "icon": "ğŸ“",
      "title": "Flexible",
      "desc": "Emit zero, one, or many elements with full control."
    }
  ],
  "support": "Widely available since JDK 16 (March 2021)",
  "prev": "streams/stream-tolist",
  "next": "streams/stream-gatherers",
  "related": [
    "streams/stream-iterate-predicate",
    "streams/stream-of-nullable",
    "streams/stream-gatherers"
  ]
}
