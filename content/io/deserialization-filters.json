{
  "id": 63,
  "slug": "deserialization-filters",
  "title": "Deserialization filters",
  "category": "io",
  "difficulty": "advanced",
  "jdkVersion": "9",
  "oldLabel": "Java 8",
  "modernLabel": "Java 9+",
  "oldApproach": "Accept Everything",
  "modernApproach": "ObjectInputFilter",
  "oldCode": "// Dangerous: accepts any class\nObjectInputStream ois =\n    new ObjectInputStream(input);\nObject obj = ois.readObject();\n// deserialization attacks possible!",
  "modernCode": "ObjectInputFilter filter =\n    ObjectInputFilter.Config\n    .createFilter(\n        \"com.myapp.*;!*\"\n    );\nois.setObjectInputFilter(filter);\nObject obj = ois.readObject();",
  "summary": "Restrict which classes can be deserialized to prevent attacks.",
  "explanation": "ObjectInputFilter lets you allowlist/denylist classes, limit object graph depth, array sizes, and reference counts. This defends against deserialization vulnerabilities without external libraries.",
  "whyModernWins": [
    {
      "icon": "üõ°Ô∏è",
      "title": "Security",
      "desc": "Prevent deserialization of unexpected/malicious classes."
    },
    {
      "icon": "üìê",
      "title": "Fine-grained",
      "desc": "Control depth, array size, references, and class patterns."
    },
    {
      "icon": "üèóÔ∏è",
      "title": "JVM-wide",
      "desc": "Set a global filter for all deserialization in the JVM."
    }
  ],
  "support": "Widely available since JDK 9 (Sept 2017)",
  "prev": "io/files-mismatch",
  "next": "errors/helpful-npe",
  "related": [
    "io/inputstream-transferto",
    "io/http-client",
    "io/path-of"
  ]
}
