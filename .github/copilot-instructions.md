# Copilot Instructions for java.evolved

## Project Overview

This is a static site showcasing modern Java patterns vs legacy approaches.
It is hosted on GitHub Pages at https://javaevolved.github.io.

## Architecture

### Source of Truth: JSON Files

Each pattern is defined as a JSON file under **`content/category/`**:

```
content/language/type-inference-with-var.json
content/collections/immutable-list-creation.json
content/streams/stream-tolist.json
...
```

**Categories:** `language`, `collections`, `strings`, `streams`, `concurrency`, `io`, `errors`, `datetime`, `security`, `tooling`

### Generated Files (DO NOT EDIT)

The following are **generated by `Generate.java`** and must not be edited directly:

- `site/language/*.html`, `site/collections/*.html`, etc. ‚Äî detail pages
- `site/data/snippets.json` ‚Äî aggregated search index

Run `jbang Generate.java` to rebuild all generated files from the JSON sources.

### Manually Maintained Files

- `site/index.html` ‚Äî homepage with preview cards (must be updated manually when adding/removing patterns)
- `site/app.js` ‚Äî client-side search, filtering, code highlighting
- `site/styles.css` ‚Äî all styling
- `templates/slug-template.html` ‚Äî HTML template with `{{placeholder}}` tokens used by the generator

### Project Structure

```
content/         # Source JSON files (one per pattern, organized by category)
site/            # Deployable site (static assets + generated HTML)
templates/       # HTML template for detail pages
Generate.java    # JBang build script (Java 25)
generate.py      # Python build script (alternative, produces identical output)
```

## JSON Snippet Schema

Each `content/category/slug.json` file has this structure:

```json
{
  "id": 1,
  "slug": "type-inference-with-var",
  "title": "Type inference with var",
  "category": "language",
  "difficulty": "beginner|intermediate|advanced",
  "jdkVersion": "10",
  "oldLabel": "Java 8",
  "modernLabel": "Java 10+",
  "oldApproach": "Explicit Types",
  "modernApproach": "var keyword",
  "oldCode": "// old way...",
  "modernCode": "// modern way...",
  "summary": "One-line description.",
  "explanation": "How it works paragraph.",
  "whyModernWins": [
    { "icon": "‚ö°", "title": "Short title", "desc": "One sentence." },
    { "icon": "üëÅ", "title": "Short title", "desc": "One sentence." },
    { "icon": "üîí", "title": "Short title", "desc": "One sentence." }
  ],
  "support": "Widely available since JDK 10 (March 2018)",
  "prev": "category/slug-of-previous",
  "next": "category/slug-of-next",
  "related": [
    "category/slug-1",
    "category/slug-2",
    "category/slug-3"
  ]
}
```

### Key Rules

- `slug` must match the filename (without `.json`)
- `category` must match the parent folder name
- `whyModernWins` must have exactly **3** entries
- `related` must have exactly **3** entries (as `category/slug` paths)
- `prev`/`next` are `category/slug` paths or `null` for first/last
- Code in `oldCode`/`modernCode` uses `\n` for newlines

## Category Display Names

| ID | Display |
|----|---------|
| `language` | Language |
| `collections` | Collections |
| `strings` | Strings |
| `streams` | Streams |
| `concurrency` | Concurrency |
| `io` | I/O |
| `errors` | Errors |
| `datetime` | Date/Time |
| `security` | Security |
| `tooling` | Tooling |

## Adding a New Pattern

1. Create `content/category/new-slug.json` with all required fields
2. Update `prev`/`next` in the adjacent patterns' JSON files
3. Add a preview card in `site/index.html`
4. Run `jbang Generate.java`

## Local Development

```bash
jbang Generate.java              # Build HTML pages + snippets.json
python3 -m http.server -d site 8090  # Serve locally
```
